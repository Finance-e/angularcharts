"use strict";google.load("visualization","1",{packages:["corechart"]}),angular.module("fangucharts",[]).directive("gChart",function(){return{restrict:"EA",controller:["$scope","$attrs","$element",function(a,b,c){var d=function(b){"undefined"==typeof a.copyData&&(a.copyData={});var c=!1;"undefined"==typeof a.copyData[b]&&(c=!0,a.copyData[b]={});for(var d in a.localData)"0"!==d&&"1"!==d&&"undefined"!=typeof a.localData[d][b]&&(c?(a.copyData[b][d]=a.localData[d][b],a.localData[d][b]=null):a.localData[d][b]=a.copyData[b][d]);c||delete a.copyData[b],a.$digest()};a.$watch("chart",function(){if("undefined"!=typeof a.chart){var b=a.chart.typeName,e=new google.visualization.ChartWrapper({chartType:b,dataTable:a.chart.data,options:a.chart.options,containerId:c[0]});e.draw();var f=e.getChart();google.visualization.events.addListener(e,"select",function(){var a=f.getSelection();0!==a.length&&null===a[0].row&&d(a[0].column)})}},!0)}]}}).directive("charts",["$window",function(a){return{restrict:"EA",template:'<div class="charts span12"><div g-chart></div></div>',replace:!0,scope:{localData:"=localdata",chartType:"=type",options:"=options",title:"=title",animation:"@animation"},controller:["$scope","$attrs","$element",function(b){b.chartTypes=["LineChart","BarChart","Coluna","ColumnChart","PieChart","AreaChart","BubbleChart","MotionChart","SteppedAreaChart","Table"];var c=function(){return{page:"enable",pagingSymbols:{prev:"Anterior",next:"Pr√≥ximo"},pagingButtonsConfiguration:"auto",allowHtml:!0,explorer:{axis:"horizontal",keepInBounds:!0,actions:["dragToZoom","rightClickToReset"]},NumberFormat:{decimalSymbol:".",fractionDigits:","}}};"undefined"==typeof b.chartType&&(b.chartType="LineChart");var d=function(){var a={};"undefined"!=typeof b.options&&(a=b.options);var d=c(),e=a;for(var f in d)"undefined"==typeof e[f]&&(e[f]=d[f]);return e.animation={duration:1e3,easing:"out"},e},e=function(a){if("undefined"!=typeof a){var c={},e=a[0],f=a[1],g=a.slice(2);if(0!==g.length){c.data=new google.visualization.DataTable;for(var h in e)c.data.addColumn(f[h],e[h]);for(var i in g){var j=[];for(var k in g[i])if("date"==f[k]){var l=new Date(g[i][k]);l.setDate(l.getDate()+1),j.push(l)}else j.push(g[i][k]);c.data.addRow(j)}var m=new google.visualization.NumberFormat({negativeColor:"red"});for(var h in f)"number"===f[h]&&m.format(c.data,parseInt(h));c.options=d(),c.typeName=b.chartType,b.chart=c}}};b.$watch("localData",function(a){e(a)},!0),b.$watch("chartType",function(){"undefined"!=typeof b.chart&&(b.chart.typeName=b.chartType)},!0);var f=angular.element(a);f.bind("resize",function(){e(b.localData),b.$digest()})}]}}]),angular.module("myApp",["fangucharts"]).controller("fanguchartCtrl",["$scope",function(){}]);